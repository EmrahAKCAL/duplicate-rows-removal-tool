let totalLinesCount=document.getElementById("lines"),uniqueLinesCount=document.getElementById("unique"),duplicateLinesCount=document.getElementById("duplicate"),textArea=document.getElementById("text"),resultArea=document.getElementById("result");const removeDuplicateButton=document.getElementById("removeDuplicatesButton"),copyButton=document.getElementById("copyButton"),downloadButton=document.getElementById("downloadButton"),resetButton=document.getElementById("resetButton"),fileInput=document.getElementById("fileInput"),loadingMessage=document.getElementById("loadingMessage"),overlay=document.getElementById("overlay"),fileSizeDisplay=document.getElementById("fileSize"),resultFileSizeDisplay=document.getElementById("resultFileSize");let uploadedFileContents=[];const fileSizes=e=>e>1048576?`${e=(e/1048576).toFixed(2)} MB`:`${e=(e/1024).toFixed(2)} KB`,resetCounts=()=>{textArea.value="",resultArea.value="",uploadedFileContents=[],uniqueLinesCount.textContent=0,duplicateLinesCount.textContent=0,totalLinesCount.textContent=0,loadingMessage.style.display="none",overlay.style.display="none",fileSizeDisplay.textContent="0 bytes",resultFileSizeDisplay.textContent=""},updateTextArea=()=>{textArea.value=uploadedFileContents.join("\n");const e=textArea.value.split("\n");updateLineCounts(e)},updateLineCounts=e=>{totalLinesCount.textContent=e.length;const t=new Set(e);uniqueLinesCount.textContent=t.size,duplicateLinesCount.textContent=e.length-t.size},handleFileUpload=e=>{resetCounts();const t=e.target.files;if(overlay.style.display="block",loadingMessage.style.display="block",t.length>0){const e=Array.from(t).map((e=>new Promise((t=>{const n=new FileReader;n.onload=()=>{uploadedFileContents.push(n.result),updateTextArea(),t()},n.readAsText(e)}))));Promise.all(e).then((()=>{loadingMessage.style.display="none",overlay.style.display="none"}));let n=Array.from(t).reduce(((e,t)=>e+t.size),0);fileSizeDisplay.textContent=fileSizes(n)}},removeDuplicates=()=>{const e=textArea.value.trim();if(""===e)return;loadingMessage.style.display="block",overlay.style.display="block";const t=e.split("\n"),n=new Set(t);resultArea.value=Array.from(n).join("\n"),updateLineCounts(t),resultFileSizeDisplay.textContent=fileSizes(new Blob([resultArea.value]).size),fileSizeDisplay.textContent=fileSizes(new Blob([textArea.value]).size),setTimeout((()=>{loadingMessage.style.display="none",overlay.style.display="none"}),1e3)},copyToClipboard=()=>{""!==resultArea.value&&(resultArea.select(),document.execCommand("copy"))},downloadFile=()=>{const e=resultArea.value.split("\n").length;if(""===resultArea.value||0===e||e!==Number(uniqueLinesCount.textContent))return;const t=new Blob([resultArea.value],{type:"text/plain"}),n=URL.createObjectURL(t),l=document.createElement("a");l.href=n,l.download="result.txt",l.click(),URL.revokeObjectURL(n)};fileInput.addEventListener("change",handleFileUpload),removeDuplicateButton.addEventListener("click",removeDuplicates),copyButton.addEventListener("click",copyToClipboard),downloadButton.addEventListener("click",downloadFile),resetButton.addEventListener("click",resetCounts);